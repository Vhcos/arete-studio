--- app/page.tsx
+++ app/page.tsx
@@ -42,6 +42,32 @@
 import { useRouter, useSearchParams } from "next/navigation";
 import PanelNavegacion from "@/components/report/PanelNavegacion";
 
+// ---- Helpers de país / ubicación ----
+const COUNTRY_OPTIONS = [
+  { code: "CL", label: "Chile" },
+  { code: "CO", label: "Colombia" },
+  { code: "MX", label: "México" },
+  { code: "AR", label: "Argentina" },
+  { code: "PE", label: "Perú" },
+  { code: "UY", label: "Uruguay" },
+  { code: "PY", label: "Paraguay" },
+  { code: "BO", label: "Bolivia" },
+  { code: "EC", label: "Ecuador" },
+];
+
+function inferCountryCodeFromUbicacion(ubicacion: unknown): string {
+  const raw = String(ubicacion ?? "").trim().toLowerCase();
+  if (!raw) return "CL";
+
+  for (const c of COUNTRY_OPTIONS) {
+    if (raw.endsWith(c.label.toLowerCase())) {
+      return c.code;
+    }
+  }
+
+  return "CL";
+}
+
 // --- helpers para bullets (acepta string[] o filas de tabla) ---
 function normalizeBullets(input: unknown, fallback: string[]): string[] {
   if (!input) return fallback;
@@ -2295,13 +2321,14 @@
 async function handleEvaluateAI() {
     if (running) return;         // evita doble click
    setRunning(true);
    setIaLoading(true);
    try {
      const input = baseOut.report.input;
      const scores = {
        total: baseOut.totalScore,
        byKey: Object.fromEntries(baseOut.items.map((it: any) => [it.key, it.score])),
     };
+     const countryCode = inferCountryCodeFromUbicacion(input?.ubicacion || input?.pais);
 
      const res = await fetch('/api/evaluate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
-       body: JSON.stringify({ input, scores }),
+       body: JSON.stringify({ input, scores, country: countryCode }),
     });
     if (!res.ok) throw new Error(await res.text());
     const data = await res.json();
@@ -2570,14 +2597,18 @@
      console.error('No se pudo obtener plan IA:', e);
    }
 
   // === Competitive Intel (Perplexity): Mapa competitivo + Checklist ===
   try {
+    const intelUbicacion = input?.ubicacion || input?.pais || '';
+    const intelCountryCode = inferCountryCodeFromUbicacion(intelUbicacion);
+
     const resIntel = await fetch('/api/competitive-intel', {
       method: 'POST',
       headers: { 'Content-Type': 'application/json' },
       body: JSON.stringify({
         idea: input?.idea,
         rubro: input?.rubro,
-        ubicacion: input?.ubicacion || input?.pais || 'Chile',
+        ubicacion: intelUbicacion,
+        countryCode: intelCountryCode,
         input, // por si el endpoint quiere más contexto
       }),
     });
     const intel = await resIntel.json().catch(() => null);
     if (resIntel.ok && intel?.ok) {
